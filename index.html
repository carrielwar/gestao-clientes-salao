<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestão de Controle de Clientes</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f8f9fa;
            color: #495057;
            font-family: Arial, sans-serif;
            padding-top: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #ffffff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .form-group label {
            font-weight: bold;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #343a40;
        }
        .form-control {
            border-radius: 5px;
            border-color: #ced4da;
        }
        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
            transition: background-color 0.2s;
        }
        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }
        .form-check-input {
            margin-top: 0.3rem;
            margin-left: -1.25rem;
        }
        #clientesList {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ficha de Atendimento do Cliente</h1>
        <form id="clienteForm">
            <!-- Seu formulário para adicionar clientes aqui -->
        </form>

        <h1>Clientes Adicionados</h1>
        <button id="carregarClientes" class="btn btn-secondary">Carregar Clientes</button>
        <div id="clientesList"></div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#carregarClientes').click(function() {
                $.get('/clientes', function(data) {
                    let clientesList = $('#clientesList');
                    clientesList.empty();
                    if (data.length === 0) {
                        clientesList.append('<p>Nenhum cliente encontrado.</p>');
                    } else {
                        let table = $('<table class="table table-bordered"><thead><tr><th>CPF</th><th>Nome</th><th>Endereço</th><th>Telefone</th><th>Instagram</th><th>Nascimento</th><th>Aspecto</th><th>Cor Natural da Raiz</th><th>Tem Química?</th><th>Faz Hidratação?</th><th>Frequência</th><th>Comprimento</th><th>Espessura</th><th>Densidade</th><th>Frequência de Lavagem</th><th>Observações</th><th>Procedimentos</th></tr></thead><tbody></tbody></table>');
                        data.forEach(function(cliente) {
                            let row = $('<tr></tr>');
                            row.append('<td>' + cliente.cpf + '</td>');
                            row.append('<td>' + cliente.nome + '</td>');
                            row.append('<td>' + cliente.endereco + '</td>');
                            row.append('<td>' + cliente.telefone + '</td>');
                            row.append('<td>' + cliente.instagram + '</td>');
                            row.append('<td>' + cliente.nasc + '</td>');
                            row.append('<td>' + cliente.aspecto + '</td>');
                            row.append('<td>' + cliente.cor_nat_raiz + '</td>');
                            row.append('<td>' + cliente.tem_quimica + '</td>');
                            row.append('<td>' + cliente.faz_tratamentos + '</td>');
                            row.append('<td>' + cliente.frequencia + '</td>');
                            row.append('<td>' + cliente.comprimento + '</td>');
                            row.append('<td>' + cliente.espessura + '</td>');
                            row.append('<td>' + cliente.densidade + '</td>');
                            row.append('<td>' + cliente.lava_frequencia + '</td>');
                            row.append('<td>' + cliente.obs + '</td>');
                            row.append('<td>' + cliente.procedimentos + '</td>');
                            table.append(row);
                        });
                        clientesList.append(table);
                    }
                }).fail(function() {
                    let clientesList = $('#clientesList');
                    clientesList.empty();
                    clientesList.append('<p>Erro ao carregar clientes. Tente novamente mais tarde.</p>');
                });
            });

            $('#clienteForm').submit(function(e) {
                e.preventDefault();
                let formData = $(this).serialize();
                $.post('/adicionar-cliente', formData, function(response) {
                    alert('Cliente adicionado com sucesso!');
                    $('#clienteForm')[0].reset();
                }).fail(function() {
                    alert('Erro ao adicionar cliente. Por favor, tente novamente.');
                });
            });
        });
    </script>
</body>
</html>
